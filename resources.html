<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>å­¦æ ¡èµ„æ–™é¦†</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <h1>å­¦æ ¡èµ„æ–™é¦†</h1>
    </header>

    <!-- æœç´¢ä¸ç­›é€‰è¡¨å• -->
    <form method="GET" action="{{ url_for('resources') }}">
        <input type="text" name="keyword" placeholder="æœç´¢æ ‡é¢˜å…³é”®è¯" value="{{ keyword or '' }}" style="width: 250px; padding: 8px;">

        <select name="category" style="width: 180px; padding: 8px;">
            <option value="all" {% if category == 'all' or not category %}selected{% endif %}>æ‰€æœ‰ç±»åˆ«</option>
            <option value="Teaching Materials" {% if category == 'Teaching Materials' %}selected{% endif %}>æ•™å­¦èµ„æ–™</option>
            <option value="Research Paper" {% if category == 'Research Paper' %}selected{% endif %}>ç ”ç©¶è®ºæ–‡</option>
        </select>

        <button type="submit" style="padding: 8px 12px;">ğŸ” æœç´¢</button>
    </form>

    <h2>èµ„æ–™åˆ—è¡¨</h2>
    <ul>
        {% for resource in resources %}
            <li>
                <strong>{{ resource.title }}</strong><br>
                ç±»åˆ«ï¼š{{ resource.category }}<br>
                ä¸Šä¼ è€…ï¼š{{ resource.uploader.username }}<br>
                ä¸Šä¼ æ—¥æœŸï¼š{{ resource.upload_date.strftime('%Y-%m-%d') }}<br>
                <a href="{{ url_for('get_file', filename=resource.file_path) }}" download>ä¸‹è½½æ–‡çŒ®</a>
                <br><br>
            </li>
        {% else %}
            <p>æš‚æ— ç¬¦åˆæ¡ä»¶çš„èµ„æ–™ã€‚</p>
        {% endfor %}
    </ul>
</body>
</html>
